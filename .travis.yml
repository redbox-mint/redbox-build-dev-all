sudo: required
language: java
services:
- docker
before_install:
- mkdir -p /tmp/build $HOME/.m2
- docker pull qcifengineering/redbox-builder
- docker run -v /tmp/build:/build -v $HOME/.m2:/m2_repo -e "--branch=2.x CLONEPATH=https://github.com/redbox-mint/redbox-build-distro.git"
  -e "SONATYPE_USERNAME=$SONATYPE_USERNAME" -e "SONATYPE_PASSWORD=$SONATYPE_PASSWORD"
  qcifengineering/redbox-builder /bin/bash -c "echo '0.0.0.0 static.appfuse.org' >>
  /etc/hosts; cd build;git clone --branch=2.x https://github.com/redbox-mint/redbox-build-distro.git
  src; cd src; mvn -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn
  --settings /apache-maven-2.2.1/conf/settings.xml -Dmaven.repo.local=/m2_repo -DskipTests=true
  -Pbuild-package-data deploy | grep -v 'CHECKSUM.*'| grep -v 'downloaded.*' | grep
  -v 'Copying.*'| grep -v '\[INFO\].*';"
cache:
  directories:
  - "$HOME/.m2"
install: true
script: true
after_success:
- if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash dockerhub_deploy.sh; fi
env:
  global:
  - secure: I2TLGAWV7M5IrcTpJPdxwZwrPTZbYNDlXA6Yp50wmEi880FzBBWlCGZMTNJxeLwW6EVAcxj63O2Dzc6C0h2CTPQkpsvv1Re89PepqqKFeOiaOjPMtaC7zKTT0Zu2MNmo529Do7BAgx5ZSMHis9x3Ig7gDEjPISV36SctZErkHApaNIBvQl4kF3vMEa1ItM8MBkQUliVvdx58Ko0b9U+6tCPZEI/LtZUS4+oajAwCdV+kBc64+uKJXuneHM72+y4m5TbslivO3zPqJGmbfhNdW+10eSMwPMRlVVNCAq3f/Y9UnjhoNiRyMmPqkrcU0QNUFapasBKidzUBBOdHHLh1Yk5T9wmiCNlxkb4DswBvOQHXsub+llV+uesLRYjdBPfekRiFH0UrluXe4uOAqfNUSlaJsnkZlOWLOtkUOpO+A4FqMsWW3SJ6p1+5stQZiLzff9ErlNln9TdNteFXFkSnL8WqiKBosMz6xvoTjrmWRvGg4odcEKGKYCx0Q/hcSpbuDqc+JzB9HQ1X0XiVC9xlAqztUPBu0ltl8WRKVdDGEf7WhgREGwYHBswti37WyGhP4hphoKCWTj1xIa+9smUbG5d6TgeMGruZvXya0P+peifUj7SpQq/0dFQn0B+OucM77Rx4+8hEz0uQ8aOOkuRPwjbldOOyR+BisdrQQVdBEIw=
  - secure: nGa51SGss0ymHeXCGEN/TN2okNyuE7yaDGJhrH06PvVE0bMEHu44BWqH1qGLr7wbusDx2xyRvIpCgNlDDPURooiDy5UWoON6naVi38Qs5sSZhcOgvsZRlo+vdI/CBGuref8LBUzKid4JRovgok0yZGHy4Xs+4aTvcwP6RBOeGUZrvNwM4L38+7ERIlhQo1MyAWdTt3UCruJStpj1Anfo5xMm2Lu+OaJ8Od5fEc/5ZUBT6qOGkidMHGTEWnubADsQLYCfJa5Cjz6ptxo8RhDaZl7dIlUnUZDY7embbsmGFGwTd1YF3y4eosNSjYsVVOY08+C0wvbRRd0xExR3BiQfJWTGDAlUdWSqzmNfzRczO5Ez72ayWUejBfl4v0wuPKHSj8L6DFujPpWnSNBkLkbRVtdJ1K1lTSp4eXEeY6rK4GvVFrN+ACN7bG9H3kwDnDaqn2Lbg6JNU8jOwgVXjXnJ/LJE5FbNsfR2PfD2SruVDj0HEYcsbc7qT1OWUx9EQkqqKwDIhaUjQ37PspjO+nT6pBj2mhD2se3kmLtSaz2TJuUOJJ1mspM3y8kOH7MwI2JlfWBu7YkAXxlaicALjRwbtYwoVMTHI458tx5T3YltzKJtBDngM+OtCev/C0LCVvGcX/uNztpX97WYgNTVrEZeOqgd8v4ZPh5tsYxetOTeDeQ=
  - secure: LE711G4tR+Rh5+WlN2HLmd83N9vAH5HBJKe/MqzY2nxwANUUv6H7Peu7lJ+bpvg0Qr1lPvmpOAAI9OcvIkNCF1i7GfCZu0fjLO2Wr/f16Yo24/Bxg8gP0LWCPUx6FLhW6Laj9mIQedcoEl6r+K2+Mij+iq7B0cu3YSuGFby9JMmE+VjV3mcSd5LIlvdKSC6fmy9c4GiUo05ThSFt4CsSapu174GcSIRkp/kqeTDkXfZXZvdsgLaezKKNiwr4q4gyNdhgd76bEVk7Ou+ycB1LZk8yaSQpJgzueHa+A2yQIPUoDrFfhCX1LyqMNnUCey9/p+GWGfJuGzgSnhUdEXxd5CQjdZfpoRY6nl4gLVW9tDMAxGZze4hpyLfFOOnSWBx4+Mr8MMWUgWcgrMATt6nCNM5nToymjSXDZ1j1lmwuDt4O1jRzEuTPGrw8bTY+f/FrXVPye7FKXhAOOYnKecarZz80vx20k9etDYsYr0FVZdnBnBGmr0BMiWge2osOafyeNXjmcIxKYyMmfc+S60+qjBeQLRx+r4dZRIh6LJiPPn3bVLM9tcyOmPkJZiyUfXfPPethOqqhIFmJE31EWpC4sVSHiMwyCFkvJ701KaMoH5H3LdQymw6TT+K7oUWFc9yOviGFgJeg7ore+4ipzL5jd/gggzaitdOJZzoir5eMyH0=
  - secure: tlmsbK8Gz/prMwKcR2d2ylruimV5v7XqG6MAZgnqrEsQXNBRf8LxKqsxMBlvn8npRt+/rx2ozkhkF6OpclqdHFlNqgij3XfCW3C4u5GJUhRaA8uuXPf+DZNHzPX/hGEoKbMn5fqSLypIyyFOGLYVFrmiP4zoESRtCSyZZBugpdK005kRF2LIRz+ughXDUwoa7PNJoRRoH/B/1x6GcBiZ1e5BwU4fNSpMpkzFYhTv2ZB9ElOoWV+9qWucMB+Eb/0KowY4dgQsqFx3qHlI0k03b4ADe7ydKEPbKgCmYc9maIpymJwonfBKnytj1KUgkB60PJb5KOLl7bas/vk5fL3R0hk8Q8kXHKRUqUL2Ezzmq6BqHoGfjHMiNEbVuF2SzvhxDlUggj7spUTH1dNukzE2covSJ1FMcvKDWaXhVntUOvj+mv6yeLuRJBWLUSwg67GtrfxvbEHV8mS8OALZFjOGnw7R1K8YiJhPNJNVUiS6JDC0IixUw4nXjdTqGPYtehcbhun9MJufZ0S0v2NjuzkGTMXBiQiKPrmKa+jiH2Z7py4FfCKjOj3pLiQGvqZhgY22CFyOYpigel+AX26+yUgvK9etYIRRwLPBuSKHZvWeM4ZVHkL4GtAUt5jRZdGB3lSiacD+rpSLJYWTUIAGnT/xGp7MSU5uyJsmJh8duxCO+fg=
notifications:
  webhooks:
    urls:
    - http://dev.redboxresearchdata.com.au/hooks/redboxdocker
    on_success: never
    on_failure: never
    on_cancel: never
    on_error: never
